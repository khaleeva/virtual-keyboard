(()=>{"use strict";const t=[{key:">",keyEn:"§",shiftKey:"<",shiftKeyEn:"±",code:"Backquote",width:"1",type:"",lang:"false"},{key:"1",keyEn:"1",shiftKey:"!",shiftKeyEn:"!",code:"Digit1",width:"1",type:"",lang:"false"},{key:"2",keyEn:"2",shiftKey:'"',shiftKeyEn:"@",code:"Digit2",width:"1",type:"",lang:"false"},{key:"3",keyEn:"3",shiftKey:"№",shiftKeyEn:"#",code:"Digit3",width:"1",type:"",lang:"false"},{key:"4",keyEn:"4",shiftKey:"%",shiftKeyEn:"$",code:"Digit4",width:"1",type:"",lang:"false"},{key:"5",keyEn:"5",shiftKey:":",shiftKeyEn:"%",code:"Digit5",width:"1",type:"",lang:"false"},{key:"6",keyEn:"6",shiftKey:",",shiftKeyEn:"^",code:"Digit6",width:"1",type:"",lang:"false"},{key:"7",keyEn:"7",shiftKey:".",shiftKeyEn:"&",code:"Digit7",width:"1",type:"",lang:"false"},{key:"8",keyEn:"8",shiftKey:"*",shiftKeyEn:"*",code:"Digit8",width:"1",type:"",lang:"false"},{key:"9",keyEn:"9",shiftKey:"(",shiftKeyEn:"(",code:"Digit9",width:"1",type:"",lang:"false"},{key:"0",keyEn:"0",shiftKey:")",shiftKeyEn:")",code:"Digit0",width:"1",type:"",lang:"false"},{key:"-",keyEn:"-",shiftKey:"_",shiftKeyEn:"_",code:"Minus",width:"1",type:"",lang:"false"},{key:"=",keyEn:"=",shiftKey:"+",shiftKeyEn:"+",code:"Equal",width:"1",type:"",lang:"false"},{key:"Backspace",keyEn:"Backspace",shiftKey:"",shiftKeyEn:"",code:"Backspace",width:"2.3",type:"backspace"},{key:"Tab",keyEn:"Tab",shiftKey:"",shiftKeyEn:"",code:"Tab",width:"1.15",type:"tab",lang:"false"},{key:"й",keyEn:"q",shiftKey:"й",shiftKeyEn:"q",code:"KeyQ",width:"1",type:"",lang:"false"},{key:"ц",keyEn:"w",shiftKey:"ц",shiftKeyEn:"w",code:"KeyW",width:"1",type:"",lang:"false"},{key:"у",keyEn:"e",shiftKey:"у",shiftKeyEn:"e",code:"KeyE",width:"1",type:"",lang:"false"},{key:"к",keyEn:"r",shiftKey:"к",shiftKeyEn:"r",code:"KeyR",width:"1",type:"",lang:"false"},{key:"е",keyEn:"t",shiftKey:"е",shiftKeyEn:"t",code:"KeyT",width:"1",type:"",lang:"false"},{key:"н",keyEn:"y",shiftKey:"н",shiftKeyEn:"y",code:"KeyY",width:"1",type:"",lang:"false"},{key:"г",keyEn:"u",shiftKey:"г",shiftKeyEn:"u",code:"KeyU",width:"1",type:"",lang:"false"},{key:"ш",keyEn:"i",shiftKey:"ш",shiftKeyEn:"i",code:"KeyI",width:"1",type:"",lang:"false"},{key:"щ",keyEn:"o",shiftKey:"щ",shiftKeyEn:"o",code:"KeyO",width:"1",type:"",lang:"false"},{key:"з",keyEn:"p",shiftKey:"з",shiftKeyEn:"p",code:"KeyP",width:"1",type:"",lang:"false"},{key:"х",keyEn:"[",shiftKey:"х",shiftKeyEn:"{",code:"BracketLeft",width:"1",type:"",lang:"false"},{key:"ъ",keyEn:"]",shiftKey:"ъ",shiftKeyEn:"}",code:"BracketRight",width:"1",type:"",lang:"false"},{key:"ё",keyEn:"\\",shiftKey:"ё",shiftKeyEn:"|",code:"Backslash",width:"1",type:"",lang:"false"},{key:"del",keyEn:"del",shiftKey:"",shiftKeyEn:"",code:"Delete",width:"1",type:"del",lang:"false"},{key:"Caps Lock",keyEn:"Caps Lock",shiftKey:"",shiftKeyEn:"",code:"CapsLock",width:"2.25",type:"caps",lang:"false"},{key:"ф",keyEn:"a",shiftKey:"ф",shiftKeyEn:"a",code:"KeyA",width:"1",type:"",lang:"false"},{key:"ы",keyEn:"s",shiftKey:"ы",shiftKeyEn:"s",code:"KeyS",width:"1",type:"",lang:"false"},{key:"в",keyEn:"d",shiftKey:"в",shiftKeyEn:"d",code:"KeyD",width:"1",type:"",lang:"false"},{key:"а",keyEn:"f",shiftKey:"а",shiftKeyEn:"f",code:"KeyF",width:"1",type:"",lang:"false"},{key:"п",keyEn:"g",shiftKey:"п",shiftKeyEn:"g",code:"KeyG",width:"1",type:"",lang:"false"},{key:"р",keyEn:"h",shiftKey:"р",shiftKeyEn:"h",code:"KeyH",width:"1",type:"",lang:"false"},{key:"о",keyEn:"j",shiftKey:"о",shiftKeyEn:"j",code:"KeyJ",width:"1",type:"",lang:"false"},{key:"л",keyEn:"k",shiftKey:"л",shiftKeyEn:"k",code:"KeyK",width:"1",type:"",lang:"false"},{key:"д",keyEn:"l",shiftKey:"д",shiftKeyEn:"l",code:"KeyL",width:"1",type:"",lang:"false"},{key:"ж",keyEn:";",shiftKey:"ж",shiftKeyEn:":",code:"Semicolon",width:"1",type:"",lang:"false"},{key:"э",keyEn:",",shiftKey:"э",shiftKeyEn:'"',code:"Quote",width:"1",type:"",lang:"false"},{key:"Enter",keyEn:"Enter",shiftKey:"",shiftKeyEn:"",code:"Enter",width:"2.25",type:"enter",lang:"false"},{key:"Shift",keyEn:"Shift",shiftKey:"",shiftKeyEn:"",code:"ShiftLeft",width:"2.25",type:"shift",lang:"false"},{key:"я",keyEn:"z",shiftKey:"я",shiftKeyEn:"z",code:"KeyZ",width:"1",type:"",lang:"false"},{key:"ч",keyEn:"x",shiftKey:"ч",shiftKeyEn:"x",code:"KeyX",width:"1",type:"",lang:"false"},{key:"с",keyEn:"c",shiftKey:"с",shiftKeyEn:"c",code:"KeyC",width:"1",type:"",lang:"false"},{key:"м",keyEn:"v",shiftKey:"м",shiftKeyEn:"v",code:"KeyV",width:"1",type:"",lang:"false"},{key:"и",keyEn:"b",shiftKey:"и",shiftKeyEn:"b",code:"KeyB",width:"1",type:"",lang:"false"},{key:"т",keyEn:"n",shiftKey:"т",shiftKeyEn:"n",code:"KeyN",width:"1",type:"",lang:"false"},{key:"ь",keyEn:"m",shiftKey:"ь",shiftKeyEn:"m",code:"KeyM",width:"1",type:"",lang:"false"},{key:"б",keyEn:",",shiftKey:"б",shiftKeyEn:"<",code:"Comma",width:"1",type:"",lang:"false"},{key:"ю",keyEn:".",shiftKey:"ю",shiftKeyEn:">",code:"Period",width:"1",type:"",lang:"false"},{key:"/",keyEn:"/",shiftKey:"?",shiftKeyEn:"?",code:"Slash",width:"1",type:"",lang:"false"},{key:"↑",keyEn:"↑",shiftKey:"↑",shiftKeyEn:"↑",code:"ArrowUp",width:"1",type:"",lang:"false"},{key:"Shift",keyEn:"Shift",shiftKey:"",shiftKeyEn:"",code:"ShiftRight",width:"2.25",type:"shift",lang:"false"},{key:"Ctrl",keyEn:"Ctrl",shiftKey:"",shiftKeyEn:"",code:"ControlLeft",width:"1",type:"ctrl",lang:"true"},{key:"Option",keyEn:"Option",shiftKey:"",shiftKeyEn:"",code:"AltLeft",width:"1",type:"option",lang:"true"},{key:"Command",keyEn:"Command",shiftKey:"",shiftKeyEn:"",code:"MetaLeft",width:"1.5",type:"cmd",lang:"false"},{key:" ",keyEn:" ",shiftKey:"",shiftKeyEn:"",code:"Space",width:"5.95",type:"",lang:"false"},{key:"Command",keyEn:"Command",shiftKey:"",shiftKeyEn:"",code:"MetaRight",width:"1.5",type:"cmd",lang:"false"},{key:"Option",keyEn:"Option",shiftKey:"",shiftKeyEn:"",code:"AltRight",width:"1",type:"option",lang:"false"},{key:"←",keyEn:"←",shiftKey:"←",shiftKeyEn:"←",code:"ArrowLeft",width:"1",type:"",lang:"false"},{key:"↓",keyEn:"↓",shiftKey:"↓",shiftKeyEn:"↓",code:"ArrowDown",width:"1",type:"",lang:"false"},{key:"→",keyEn:"→",shiftKey:"→",shiftKeyEn:"→",code:"ArrowRight",width:"1",type:"",lang:"false"},{key:"Ctrl",keyEn:"Ctrl",shiftKey:"",shiftKeyEn:"",code:"ControlRight",width:"1",type:"ctrl",lang:"false"}];class e{constructor(t,{key:e,shiftKey:n,keyEn:s,shiftKeyEn:i,lang:a,code:o,width:h,type:y,...d}){this.node=t,this.key=e,this.shiftKey=n,this.keyEn=s,this.shiftKeyEn=i,this.lang=a,this.code=o,this.width=h,this.type=y,this.isCapsLockOn=!1,this.btnContainer=null,this.curLang="ru",this.currentLanguage=localStorage.getItem("language")||this.curLang}generateButtons(){return this.btnContainer=document.createElement("button"),this.btnContainer.className="button",this.btnContainer.style.width=60*this.width+"px",this.btnContainer.setAttribute("data-code",this.code),this.btnContainer.setAttribute("data-key",this.key),this.btnContainer.setAttribute("data-keyen",this.keyEn),this.btnContainer.innerHTML=`${"ru"===this.currentLanguage?this.key:this.keyEn}`,"true"===this.lang&&(document.addEventListener("keydown",(t=>{"ControlLeft"===t.code?window.localStorage.setItem("ctrlActive","true"):"AltLeft"===t.code&&window.localStorage.setItem("OptionActive","true"),this.toggleLang();const e=document.querySelector("button[data-type='caps']");let n=window.localStorage.getItem("shiftActive");e.classList.contains("button_caps")&&!n?(this.isCapsLockOn=!0,this.updateButtonContainer(!0)):e.classList.contains("button_caps")&&n?(this.isCapsLockOn=!1,this.updateButtonContainer()):!e.classList.contains("button_caps")&&n?(this.isCapsLockOn=!0,this.updateButtonContainer()):(this.isCapsLockOn=!1,this.updateButtonContainer())})),document.addEventListener("keyup",(t=>{"ControlLeft"===t.code?localStorage.setItem("ctrlActive","false"):"AltLeft"===t.code&&localStorage.setItem("OptionActive","false"),this.toggleLang()}))),this.shiftKey&&this.btnContainer.setAttribute("data-shiftkey",this.shiftKey),this.shiftKeyEn&&this.btnContainer.setAttribute("data-shiftkeyen",this.shiftKeyEn),this.type?(this.btnContainer.className="button button_colored",this.btnContainer.setAttribute("data-type",this.type),this.btnContainer.addEventListener("mousedown",(t=>{this[t.target.dataset.type](),t.target.classList.add("button_highlight"),t.preventDefault()})),this.btnContainer.addEventListener("mouseup",(t=>{t.target.classList.remove("button_highlight")})),document.addEventListener("keydown",(t=>{t.code===this.code&&(this[this.type](),document.querySelector(`button[data-code='${t.code}']`).classList.add("button_highlight"),t.preventDefault())})),document.addEventListener("keyup",(t=>{t.code===this.code&&document.querySelector(`button[data-code='${t.code}']`).classList.remove("button_highlight")})),"caps"===this.type&&(this.btnContainer.addEventListener("mousedown",(t=>{this.btnContainer.classList.toggle("button_caps"),this.isCapsLockOn=this.btnContainer.classList.contains("button_caps"),this.updateButtonContainer()})),document.addEventListener("keydown",(t=>{"CapsLock"===t.key&&(this.btnContainer.classList.add("button_caps"),this.isCapsLockOn=!0,this.updateButtonContainer())})),document.addEventListener("keyup",(t=>{"CapsLock"===t.key&&(this.btnContainer.classList.remove("button_caps"),this.isCapsLockOn=!1,this.updateButtonContainer())}))),"shift"===this.type&&(this.btnContainer.addEventListener("mousedown",(t=>{this.btnContainer.classList.add("button_shift");const e=document.querySelector("button[data-type='caps']");this.isCapsLockOn=!e.classList.contains("button_caps"),this.updateButtonContainer()})),this.btnContainer.addEventListener("mouseup",(t=>{this.btnContainer.classList.remove("button_shift"),window.localStorage.removeItem("shiftActive");const e=document.querySelector("button[data-type='caps']");this.isCapsLockOn=e.classList.contains("button_caps"),this.updateButtonContainer()})),document.addEventListener("keydown",(t=>{if("Shift"===t.key){this.btnContainer.classList.add("button_shift");const t=document.querySelector("button[data-type='caps']");this.isCapsLockOn=!t.classList.contains("button_caps"),console.log("DOWN",this.isCapsLockOn),this.updateButtonContainer()}})),document.addEventListener("keyup",(t=>{if("Shift"===t.key){this.btnContainer.classList.remove("button_shift"),window.localStorage.removeItem("shiftActive");const t=document.querySelector("button[data-type='caps']");this.isCapsLockOn=!t.classList.contains("button_caps"),console.log("UP",this.isCapsLockOn),this.updateButtonContainer()}})))):(this.btnContainer.addEventListener("mousedown",(t=>{this.handleClickChar(t),t.target.classList.add("button_highlight")})),this.btnContainer.addEventListener("mouseup",(t=>{t.target.classList.remove("button_highlight")})),document.addEventListener("keydown",(t=>this.handleKeyDownChar(t))),document.addEventListener("keyup",(t=>{t.code===this.code&&document.querySelector(`button[data-code='${t.code}']`).classList.remove("button_highlight")})),"ArrowUp"!==this.code&&"ArrowDown"!==this.code&&"ArrowRight"!==this.code&&"ArrowLeft"!==this.code||(this.btnContainer.className="button button_colored")),this.btnContainer}handleKeyDownChar(t){const e=this.code;document.querySelector(`button[data-code='${t.code}']`).classList.add("button_highlight"),t.code===e&&(this.node.value+=this.isRegisterChar(),t.preventDefault())}handleClickChar(t){this.node.value+=this.isRegisterChar(),t.preventDefault()}updateButtonContainer(){const t=document.querySelectorAll("button:not([data-type])");let e=window.localStorage.getItem("shiftActive"),n=window.localStorage.getItem("language");this.isCapsLockOn?t.forEach((t=>{let s=t.dataset.key,i=t.dataset.shiftkey,a=t.dataset.keyen,o=t.dataset.shiftkeyen;t.innerHTML="ru"===n?`${e&&i?i.toUpperCase():s.toUpperCase()}`:`${e&&o?o.toUpperCase():a.toUpperCase()}`})):t.forEach((t=>{let s=t.dataset.key,i=t.dataset.shiftkey,a=t.dataset.keyen,o=t.dataset.shiftkeyen;t.innerHTML="ru"===n?`${e&&i?i.toLowerCase():s.toLowerCase()}`:`${e&&o?o.toLowerCase():a.toLowerCase()}`}))}del(){this.node.focus();const t=this.node.value,e=this.node.selectionStart;e<t.length?(this.node.value=t.slice(0,e)+t.slice(e+1),this.node.selectionStart=e,this.node.selectionEnd=e):(this.node.selectionStart=t.length,this.node.selectionEnd=t.length)}backspace(){this.node.focus();const t=this.node.value,e=this.node.selectionStart;0!==e&&(this.node.value=t.slice(0,e-1)+t.slice(e),this.node.selectionStart=e-1,this.node.selectionEnd=e-1)}tab(){let t=this.node.selectionStart,e=this.node.selectionEnd;this.node.value=this.node.value.substring(0,t)+"  "+this.node.value.substring(e),this.node.selectionStart=t+2,this.node.selectionEnd=e+2}enter(){let t=this.node.selectionStart,e=this.node.selectionEnd;this.node.value=this.node.value.substring(0,t)+"\n"+this.node.value.substring(e),this.node.selectionStart=t+1,this.node.selectionEnd=e+1}caps(){const t=document.querySelector("button[data-type='caps']");this.isCapsLockOn=!t.classList.contains("button_caps"),this.updateButtonContainer()}isRegisterChar(){const t=document.querySelector("button[data-type='shift']"),e=document.querySelector("button[data-type='caps']");let n=t&&t.classList.contains("button_shift"),s=e&&e.classList.contains("button_caps"),i=!!window.localStorage.getItem("shiftActive"),a=window.localStorage.getItem("language");return n&&!s?"ru"===a?i?this.shiftKey.toUpperCase():this.key.toUpperCase():i?this.shiftKeyEn.toUpperCase():this.keyEn.toUpperCase():!n&&s?"ru"===a?this.key.toUpperCase():this.keyEn.toUpperCase():n&&s?"ru"===a?i?this.shiftKey.toLowerCase():this.key.toLowerCase():i?this.shiftKeyEn.toLowerCase():this.keyEn.toLowerCase():"ru"===a?this.key.toLowerCase():this.keyEn.toLowerCase()}option(){}ctrl(){}cmd(){}shift(){const t=document.querySelector("button[data-type='shift']");this.isCapsLockOn=!t.classList.contains("button_shift"),window.localStorage.setItem("shiftActive",this.isCapsLockOn),this.updateButtonContainer()}toggleLang(){let t="true"===window.localStorage.getItem("ctrlActive"),e="true"===window.localStorage.getItem("OptionActive");t&&e&&("ru"===this.currentLanguage?(this.currentLanguage="en",localStorage.setItem("language",this.currentLanguage)):(this.currentLanguage="ru",localStorage.setItem("language",this.currentLanguage)))}}window.onload=function(){n(),document.querySelector(".keyboard")&&s()};const n=()=>{document.querySelector("body").innerHTML='<div class="container">\n            <h1>Virtual Keyboard</h1>\n            <textarea rows="10"></textarea>\n            <div class="keyboard"></div>\n            <h2>Клавиатура создана в операционной системе MacOs</h2>\n            <h3>Смена языка по левой клавише CTRL + левая OPTION</h3>\n        </div>'},s=()=>{const e=document.querySelector(".keyboard");i(t).forEach((t=>{e.append(t.generateButtons())}))},i=t=>{const n=document.querySelector("textarea");let s=[];return t.forEach((t=>{s.push(new e(n,t))})),s}})();