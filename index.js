(()=>{"use strict";const t=[{key:"ё",code:"Backslash",width:"1",type:""},{key:"1",code:"Digit1",width:"1",type:""},{key:"2",code:"Digit2",width:"1",type:""},{key:"3",code:"Digit3",width:"1",type:""},{key:"4",code:"Digit4",width:"1",type:""},{key:"5",code:"Digit5",width:"1",type:""},{key:"6",code:"Digit6",width:"1",type:""},{key:"7",code:"Digit7",width:"1",type:""},{key:"8",code:"Digit8",width:"1",type:""},{key:"9",code:"Digit9",width:"1",type:""},{key:"0",code:"Digit0",width:"1",type:""},{key:"-",code:"Minus",width:"1",type:""},{key:"=",code:"Equal",width:"1",type:""},{key:"Backspace",code:"Backspace",width:"2.3",type:"backspace"},{key:"Tab",code:"Tab",width:"1.15",type:"tab"},{key:"й",code:"KeyQ",width:"1",type:""},{key:"ц",code:"KeyW",width:"1",type:""},{key:"у",code:"KeyE",width:"1",type:""},{key:"к",code:"KeyR",width:"1",type:""},{key:"е",code:"KeyT",width:"1",type:""},{key:"н",code:"KeyY",width:"1",type:""},{key:"г",code:"KeyU",width:"1",type:""},{key:"ш",code:"KeyI",width:"1",type:""},{key:"щ",code:"KeyO",width:"1",type:""},{key:"з",code:"KeyP",width:"1",type:""},{key:"х",code:"BracketLeft",width:"1",type:""},{key:"ъ",code:"BracketRight",width:"1",type:""},{key:"\\",code:"Backslash",width:"1",type:""},{key:"del",code:"Delete",width:"1",type:"del"},{key:"Caps Lock",code:"CapsLock",width:"2.25",type:"caps"},{key:"ф",code:"KeyA",width:"1",type:""},{key:"ы",code:"KeyS",width:"1",type:""},{key:"в",code:"KeyD",width:"1",type:""},{key:"а",code:"KeyF",width:"1",type:""},{key:"п",code:"KeyG",width:"1",type:""},{key:"р",code:"KeyH",width:"1",type:""},{key:"о",code:"KeyJ",width:"1",type:""},{key:"л",code:"KeyK",width:"1",type:""},{key:"д",code:"KeyL",width:"1",type:""},{key:"ж",code:"Semicolon",width:"1",type:""},{key:"э",code:"Quote",width:"1",type:""},{key:"Enter",code:"Enter",width:"2.25",type:"enter"},{key:"Shift",code:"ShiftLeft",width:"2.25",type:"shift"},{key:"я",code:"KeyZ",width:"1",type:""},{key:"ч",code:"KeyX",width:"1",type:""},{key:"с",code:"KeyC",width:"1",type:""},{key:"м",code:"KeyV",width:"1",type:""},{key:"и",code:"KeyB",width:"1",type:""},{key:"т",code:"KeyN",width:"1",type:""},{key:"ь",code:"KeyM",width:"1",type:""},{key:"б",code:"Comma",width:"1",type:""},{key:"ю",code:"Period",width:"1",type:""},{key:"/",code:"Slash",width:"1",type:""},{key:"↑",code:"ArrowUp",width:"1",type:""},{key:"Shift",code:"ShiftRight",width:"2.25",type:"shift"},{key:"Ctrl",code:"ControlLeft",width:"1",type:"ctrl"},{key:"Option",code:"AltLeft",width:"1",type:"option"},{key:"Command",code:"MetaLeft",width:"1.5",type:"cmd"},{key:" ",code:"Space",width:"5.95",type:""},{key:"Command",code:"MetaRight",width:"1.5",type:"cmd"},{key:"Option",code:"AltRight",width:"1",type:"option"},{key:"←",code:"ArrowLeft",width:"1",type:""},{key:"↓",code:"ArrowDown",width:"1",type:""},{key:"→",code:"ArrowRight",width:"1",type:""},{key:"Ctrl",code:"ControlRight",width:"1",type:"ctrl"}];class e{constructor(t,{key:e,code:i,width:o,type:n,...s}){this.node=t,this.key=e,this.code=i,this.width=o,this.type=n,this.isCapsLockOn=!1,this.btnContainer=null,this.isKeyPressed=!1}generateButtons(){return this.btnContainer=document.createElement("button"),this.btnContainer.className="button",this.btnContainer.style.width=60*this.width+"px",this.btnContainer.setAttribute("data-code",this.code),this.btnContainer.setAttribute("data-key",this.key),this.btnContainer.innerHTML=`${this.key}`,this.type?(this.btnContainer.className="button button_colored",this.btnContainer.setAttribute("data-type",this.type),this.btnContainer.addEventListener("mousedown",(t=>{this[t.target.dataset.type](),t.target.classList.add("button_highlight"),t.preventDefault()})),this.btnContainer.addEventListener("mouseup",(t=>{t.target.classList.remove("button_highlight")})),document.addEventListener("keydown",(t=>{t.code===this.code&&(this[this.type](),document.querySelector(`button[data-code="${t.code}"]`).classList.add("button_highlight"),t.preventDefault())})),document.addEventListener("keyup",(t=>{t.code===this.code&&document.querySelector(`button[data-code="${t.code}"]`).classList.remove("button_highlight")})),"caps"===this.type&&(this.btnContainer.addEventListener("mousedown",(t=>{this.btnContainer.classList.toggle("button_caps"),this.updateButtonContainer()})),document.addEventListener("keydown",(t=>{"CapsLock"===t.key&&(this.isKeyPressed=!0,this.btnContainer.classList.add("button_caps"),this.isCapsLockOn=!0,this.updateButtonContainer())})),document.addEventListener("keyup",(t=>{"CapsLock"===t.key&&(this.isKeyPressed=!1,this.btnContainer.classList.remove("button_caps"),this.isCapsLockOn=!1,this.updateButtonContainer())}))),"shift"===this.type&&(this.btnContainer.addEventListener("mousedown",(t=>{this.btnContainer.classList.add("button_shift"),this.isCapsLockOn=!0,this.updateButtonContainer()})),this.btnContainer.addEventListener("mouseup",(t=>{this.btnContainer.classList.remove("button_shift"),this.isCapsLockOn=!1,this.updateButtonContainer()})),document.addEventListener("keydown",(t=>{"Shift"===t.key&&(this.isKeyPressed=!0,this.btnContainer.classList.add("button_shift"),this.isCapsLockOn=!0,this.updateButtonContainer())})),document.addEventListener("keyup",(t=>{"Shift"===t.key&&(this.isKeyPressed=!1,this.btnContainer.classList.remove("button_shift"),this.isCapsLockOn=!1,this.updateButtonContainer())})))):(this.btnContainer.addEventListener("mousedown",(t=>{this.handleClickChar(t),t.target.classList.add("button_highlight")})),this.btnContainer.addEventListener("mouseup",(t=>{t.target.classList.remove("button_highlight")})),document.addEventListener("keydown",(t=>this.handleKeyDownChar(t))),document.addEventListener("keyup",(t=>{t.code===this.code&&document.querySelector(`button[data-code="${t.code}"]`).classList.remove("button_highlight")})),"ArrowUp"!==this.code&&"ArrowDown"!==this.code&&"ArrowRight"!==this.code&&"ArrowLeft"!==this.code||(this.btnContainer.className="button button_colored")),this.btnContainer}handleKeyDownChar(t){const e=this.code;document.querySelector(`button[data-code="${t.code}"]`).classList.add("button_highlight"),t.code===e&&(this.node.value+=this.isRegisterChar(),t.preventDefault())}handleClickChar(t){this.node.value+=this.isRegisterChar(),t.preventDefault()}updateButtonContainer(){const t=document.querySelectorAll("button");this.isCapsLockOn?t.forEach((t=>{if(!t.dataset.type){let e=t.dataset.key;t.innerHTML=`${e.toUpperCase()}`}})):t.forEach((t=>{let e=t.dataset.key;t.innerHTML=`${e.toLowerCase()}`}))}del(){this.node.focus();const t=this.node.value,e=this.node.selectionStart;e<t.length?(this.node.value=t.slice(0,e)+t.slice(e+1),this.node.selectionStart=e,this.node.selectionEnd=e):(this.node.selectionStart=t.length,this.node.selectionEnd=t.length)}backspace(){this.node.focus();const t=this.node.value,e=this.node.selectionStart;0!==e&&(this.node.value=t.slice(0,e-1)+t.slice(e),this.node.selectionStart=e-1,this.node.selectionEnd=e-1)}tab(){let t=this.node.selectionStart,e=this.node.selectionEnd;this.node.value=this.node.value.substring(0,t)+"  "+this.node.value.substring(e),this.node.selectionStart=t+2,this.node.selectionEnd=e+2}enter(){let t=this.node.selectionStart,e=this.node.selectionEnd;this.node.value=this.node.value.substring(0,t)+"\n"+this.node.value.substring(e),this.node.selectionStart=t+1,this.node.selectionEnd=e+1}caps(){const t=document.querySelector('button[data-type="caps"]');this.isCapsLockOn=!t.classList.contains("button_caps"),this.updateButtonContainer()}isRegisterChar(){const t=document.querySelector("button[data-type='shift']"),e=document.querySelector("button[data-type='caps']");let i=t&&t.classList.contains("button_shift"),o=e&&e.classList.contains("button_caps");return i||o?this.key.toUpperCase():this.key.toLowerCase()}ctrl(){console.log("не выполнено")}cmd(){console.log("не выполнено")}shift(){const t=document.querySelector('button[data-type="shift"]');this.isCapsLockOn=!t.classList.contains("button_shift"),this.updateButtonContainer()}option(){console.log("не выполнено")}}window.onload=function(){i()};const i=()=>{const e=document.querySelector(".keyboard");o(t).forEach((t=>{e.append(t.generateButtons())}))},o=t=>{const i=document.querySelector("textarea");let o=[];return t.forEach((t=>{o.push(new e(i,t))})),o}})();